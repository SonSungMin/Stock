<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live API ê²½ì œ ì§€í‘œ ëŒ€ì‹œë³´ë“œ</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f8f9fa; color: #212529; line-height: 1.6; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: #ffffff; padding: 30px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
        .header { text-align: center; border-bottom: 2px solid #dee2e6; padding-bottom: 20px; margin-bottom: 30px; }
        .header h1 { color: #0056b3; margin: 0; }
        .header p { margin: 5px 0 0; color: #6c757d; }
        .section-title { font-size: 1.8em; color: #17a2b8; margin-top: 40px; margin-bottom: 20px; border-left: 5px solid #17a2b8; padding-left: 10px; }
        #outlook-section { text-align: center; padding: 30px; border-radius: 10px; margin-bottom: 30px; border: 1px solid; }
        .outlook-signal { font-size: 3em; margin-bottom: 10px; }
        .outlook-title { font-size: 1.8em; font-weight: bold; margin: 0; }
        .indicator-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .indicator-card { background: #ffffff; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); min-height: 150px; }
        .indicator-card h4 { margin-top: 0; color: #343a40; font-size: 1.2em; display: flex; justify-content: space-between; }
        .indicator-card .date { font-size: 0.8em; color: #6c757d; font-weight: normal; }
        .indicator-value { font-size: 2.2em; font-weight: bold; margin: 10px 0; color: #007bff; }
        .indicator-status { display: flex; align-items: center; font-weight: bold; font-size: 1.1em; }
        .status-icon { font-size: 1.5em; margin-right: 8px; }
        .analysis-section p { font-size: 1.1em; background-color: #e9ecef; padding: 20px; border-radius: 8px; border-left: 5px solid #6c757d; }
        .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #dee2e6; font-size: 0.9em; color: #6c757d; }
        .positive-bg { background-color: #d4edda; border-color: #c3e6cb; } .positive-text { color: #155724; } .positive-icon { color: #28a745; }
        .negative-bg { background-color: #f8d7da; border-color: #f5c6cb; } .negative-text { color: #721c24; } .negative-icon { color: #dc3545; }
        .neutral-bg { background-color: #fff3cd; border-color: #ffeeba; } .neutral-text { color: #856404; } .neutral-icon { color: #ffc107; }
        .loading-text { color: #6c757d; font-style: italic; font-size: 1.2em; }
    </style>
</head>
<body>
    <div class="container">
        <header class="header"><h1>Live API ê²½ì œ ì§€í‘œ ëŒ€ì‹œë³´ë“œ</h1><p id="update-time">ë°ì´í„° ë¡œë”© ì¤‘...</p></header>
        <h2 class="section-title">ì‹œì¥ ì¢…í•© ì „ë§</h2><div id="outlook-section"><p class="loading-text">ì§€í‘œ ë¶„ì„ ì¤‘...</p></div>
        <h2 class="section-title">í•µì‹¬ ì§€í‘œ ëŒ€ì‹œë³´ë“œ</h2><div id="indicator-grid" class="indicator-grid"></div>
        <h2 class="section-title">ì¢…í•© ë¶„ì„ ë° í•´ì„</h2><div id="analysis-section" class="analysis-section"></div>
        <footer class="footer"><p>ë³¸ í˜ì´ì§€ì˜ ë°ì´í„°ëŠ” FRED, í•œêµ­ì€í–‰ ECOS APIë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤.</p><p>ëª¨ë“  íˆ¬ìì˜ ì±…ì„ì€ íˆ¬ìì ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤.</p></footer>
    </div>

<script>
// ==================================================================
// â–¼ â–¼ â–¼ â–¼ â–¼ ì—¬ê¸°ì— ë°œê¸‰ë°›ì€ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” â–¼ â–¼ â–¼ â–¼ â–¼
// ==================================================================
const API_KEYS = {
    FRED: '480b8d74e3d546674e8180193c30dbf6',      // ë¯¸êµ­ ë°ì´í„°ìš©
    ECOS: 'C4UHXGGIUUZ1TNZJOXFM' // í•œêµ­ ë°ì´í„°ìš©
};
// ==================================================================

document.addEventListener('DOMContentLoaded', main);

async function main() {
    if (API_KEYS.FRED.includes('ì—¬ê¸°ì—') || API_KEYS.ECOS.includes('ì—¬ê¸°ì—')) {
        alert('JavaScript ì½”ë“œ ìƒë‹¨ì— API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    renderInitialPlaceholders();

    try {
        const [yieldData, additionalFredData, koreanIndicators] = await Promise.all([
            fetchYieldSpread(),
            fetchAdditionalFredData(),
            fetchAllKoreanData()
        ]);
        
        const allIndicators = [yieldData, ...additionalFredData, ...koreanIndicators];
        const analyzedIndicators = analyzeIndicators(allIndicators);
        const marketOutlook = getMarketOutlook(analyzedIndicators);

        renderDashboard(analyzedIndicators, marketOutlook);

    } catch (error) {
        console.error("ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:", error);
        document.getElementById('update-time').innerText = "ë°ì´í„° ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. API í‚¤ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.";
    }
}

async function fetchYieldSpread() {
    const fredUrl10Y = `https://api.stlouisfed.org/fred/series/observations?series_id=DGS10&api_key=${API_KEYS.FRED}&file_type=json&sort_order=desc&limit=1`;
    const fredUrl2Y = `https://api.stlouisfed.org/fred/series/observations?series_id=DGS2&api_key=${API_KEYS.FRED}&file_type=json&sort_order=desc&limit=1`;

    const [res10Y, res2Y] = await Promise.all([
        fetch(`/.netlify/functions/proxy?targetUrl=${encodeURIComponent(fredUrl10Y)}`),
        fetch(`/.netlify/functions/proxy?targetUrl=${encodeURIComponent(fredUrl2Y)}`)
    ]);

    const data10Y = await res10Y.json();
    const data2Y = await res2Y.json();
    
    if (!data10Y.observations || data10Y.observations.length === 0 || !data2Y.observations || data2Y.observations.length === 0) {
        throw new Error("FRED ê¸ˆë¦¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
    }

    const value10Y = parseFloat(data10Y.observations[0].value);
    const value2Y = parseFloat(data2Y.observations[0].value);
    const spread = value10Y - value2Y;
    
    return {
        id: "yield_spread", name: "ğŸ‡ºğŸ‡¸ ì¥ë‹¨ê¸° ê¸ˆë¦¬ì°¨",
        value: parseFloat(spread.toFixed(2)), unit: "%p", date: data10Y.observations[0].date.substring(5)
    };
}

async function fetchAdditionalFredData() {
    const seriesIds = {
        vix: 'VIXCLS',
        dollarIndex: 'DTWEXBGS',
        wti: 'MCOILWTICO'
    };

    const urls = Object.entries(seriesIds).map(([key, seriesId]) => {
        const url = `https://api.stlouisfed.org/fred/series/observations?series_id=${seriesId}&api_key=${API_KEYS.FRED}&file_type=json&sort_order=desc&limit=1`;
        return fetch(`/.netlify/functions/proxy?targetUrl=${encodeURIComponent(url)}`).then(res => res.json());
    });

    const [vixData, dollarIndexData, wtiData] = await Promise.all(urls);

    const formatFredData = (data, id, name, unit) => {
        if (!data.observations || data.observations.length === 0) {
            return { id, name, value: 'N/A', unit, date: 'ì—†ìŒ' };
        }
        const observation = data.observations[0];
        return {
            id, name,
            value: parseFloat(observation.value),
            unit,
            date: observation.date.substring(5)
        };
    };

    return [
        formatFredData(vixData, 'vix', 'ğŸ˜± VIX ì§€ìˆ˜', ''),
        formatFredData(dollarIndexData, 'dollar_index', 'ğŸ’² ë‹¬ëŸ¬ ì¸ë±ìŠ¤', ''),
        formatFredData(wtiData, 'wti_price', 'ğŸ›¢ï¸ WTI ìœ ê°€', '$/bbl')
    ];
}

async function fetchAllKoreanData() {
    const ecosApiUrl = `https://ecos.bok.or.kr/api/KeyStatisticList/${API_KEYS.ECOS}/json/kr/1/100`;
    const finalUrl = `/.netlify/functions/proxy?targetUrl=${encodeURIComponent(ecosApiUrl)}`;
    const response = await fetch(finalUrl);
    const data = await response.json();

    if (!data.KeyStatisticList || !data.KeyStatisticList.row) {
        throw new Error("í•œêµ­ì€í–‰ ì£¼ìš”ì§€í‘œ(KeyStatisticList)ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
    }
    
    const allStats = data.KeyStatisticList.row;

    const indicatorMapping = {
        'base_rate': { name: 'ğŸ‡°ğŸ‡· ê¸°ì¤€ê¸ˆë¦¬', keywords: ['ê¸°ì¤€ê¸ˆë¦¬'] },
        'exchange_rate': { name: 'ğŸ‡°ğŸ‡· ì›/ë‹¬ëŸ¬ í™˜ìœ¨', keywords: ['ì›/ë‹¬ëŸ¬'] },
        'industrial_production': { name: 'ğŸ‡°ğŸ‡· ì‚°ì—…ìƒì‚°ì§€ìˆ˜', keywords: ['ì‚°ì—…ìƒì‚°ì§€ìˆ˜'] },
        'consumer_sentiment': { name: 'ğŸ‡°ğŸ‡· ì†Œë¹„ìì‹¬ë¦¬ì§€ìˆ˜', keywords: ['ì†Œë¹„ìë™í–¥ì¡°ì‚¬', 'ì†Œë¹„ìì‹¬ë¦¬ì§€ìˆ˜'] },
        'corp_bond_spread': { name: 'ğŸ‡°ğŸ‡· íšŒì‚¬ì±„ ìŠ¤í”„ë ˆë“œ', keywords: ['íšŒì‚¬ì±„', 'ìŠ¤í”„ë ˆë“œ'] },
        'kospi': { name: 'ğŸ‡°ğŸ‡· ì½”ìŠ¤í”¼', keywords: ['KOSPI'] },
        'producer_price_index': { name: 'ğŸ‡°ğŸ‡· ìƒì‚°ìë¬¼ê°€ì§€ìˆ˜', keywords: ['ìƒì‚°ìë¬¼ê°€ì§€ìˆ˜'] },
        'gdp_growth': { name: 'ğŸ‡°ğŸ‡· GDP ì„±ì¥ë¥ ', keywords: ['GDP', 'ì„±ì¥ë¥ ', 'ì „ê¸°ëŒ€ë¹„'] },
        'export_growth': { name: 'ğŸ‡°ğŸ‡· ìˆ˜ì¶œ ì¦ê°€ìœ¨', keywords: ['ìˆ˜ì¶œ', 'ì¦ê°ë¥ '] },
        'cpi': { name: 'ğŸ‡°ğŸ‡· ì†Œë¹„ìë¬¼ê°€ì§€ìˆ˜', keywords: ['ì†Œë¹„ìë¬¼ê°€ì§€ìˆ˜'] },
        'unemployment': { name: 'ğŸ‡°ğŸ‡· ì‹¤ì—…ë¥ ', keywords: ['ì‹¤ì—…ë¥ '] }
    };

    const foundIndicators = {};

    allStats.forEach(stat => {
        for (const [key, value] of Object.entries(indicatorMapping)) {
            if (!foundIndicators[key] && value.keywords.every(kw => stat.KEYSTAT_NAME.includes(kw))) {
                foundIndicators[key] = {
                    id: key,
                    name: value.name,
                    value: parseFloat(stat.DATA_VALUE),
                    unit: stat.UNIT_NAME,
                    date: stat.TIME.substring(4, 6) + 'ì›”'
                };
            }
        }
    });

    return Object.values(foundIndicators);
}

// --- ë¶„ì„ ë° ë Œë”ë§ í•¨ìˆ˜ (ìˆ˜ì • ì—†ìŒ) ---
function analyzeIndicators(indicators) {
    return indicators.map(indicator => {
        let analysis = {};
        if (typeof indicator.value !== 'number' || isNaN(indicator.value)) {
             return { ...indicator, status: 'negative', score: 0, text: 'ë°ì´í„° ì—†ìŒ', icon: 'âŒ' };
        }
        switch (indicator.id) {
            case 'yield_spread':
                if (indicator.value < -0.1) analysis = { status: 'negative', score: -2, text: 'ê²½ê¸° ì¹¨ì²´ ìš°ë ¤', icon: 'ğŸš¨' };
                else if (indicator.value < 0) analysis = { status: 'neutral', score: 0, text: 'ì—­ì „í­ ì¶•ì†Œ', icon: 'âš ï¸' };
                else analysis = { status: 'positive', score: 2, text: 'ì •ìƒ ë²”ìœ„', icon: 'âœ…' };
                break;
            case 'gdp_growth':
                if (indicator.value >= 0.7) analysis = { status: 'positive', score: 2, text: 'ê²¬ì¡°í•œ íšŒë³µì„¸', icon: 'ğŸ‘' };
                else if (indicator.value >= 0.3) analysis = { status: 'neutral', score: 0, text: 'ì™„ë§Œí•œ ì„±ì¥', icon: 'ğŸ˜' };
                else analysis = { status: 'negative', score: -2, text: 'ì„±ì¥ ë‘”í™” ìš°ë ¤', icon: 'ğŸ‘' };
                break;
            case 'export_growth':
                if (indicator.value > 2.0) analysis = { status: 'positive', score: 2, text: 'í”ŒëŸ¬ìŠ¤ ì „í™˜', icon: 'ğŸ“ˆ' };
                else if (indicator.value >= 0) analysis = { status: 'neutral', score: 0, text: 'ì†Œí­ ê°œì„ ', icon: 'ğŸ“Š' };
                else analysis = { status: 'negative', score: -2, text: 'ìˆ˜ì¶œ ë¶€ì§„', icon: 'ğŸ“‰' };
                break;
            case 'cpi':
                if (indicator.value <= 3.0) analysis = { status: 'positive', score: 1, text: 'ë¬¼ê°€ ì•ˆì •ì„¸', icon: 'ğŸ˜Œ' };
                else if (indicator.value <= 4.0) analysis = { status: 'neutral', score: 0, text: 'ì¸í”Œë ˆì´ì…˜ ë‘”í™”', icon: 'ğŸ˜' };
                else analysis = { status: 'negative', score: -1, text: 'ë¬¼ê°€ ì••ë ¥ ì§€ì†', icon: 'ğŸ”¥' };
                break;
            case 'unemployment':
                if (indicator.value <= 3.0) analysis = { status: 'positive', score: 1, text: 'ì™„ì „ê³ ìš© ìˆ˜ì¤€', icon: 'ğŸ’ª' };
                else analysis = { status: 'negative', score: -1, text: 'ê³ ìš© ì‹œì¥ ì•…í™”', icon: 'ğŸ˜¥' };
                break;
             case 'base_rate':
                if (indicator.value <= 2.5) analysis = { status: 'positive', score: 1, text: 'ì™„í™”ì  í†µí™”ì •ì±…', icon: 'ğŸ’°' };
                else if (indicator.value <= 3.5) analysis = { status: 'neutral', score: 0, text: 'ì¤‘ë¦½ì  ê¸ˆë¦¬ ìˆ˜ì¤€', icon: 'âš–ï¸' };
                else analysis = { status: 'negative', score: -1, text: 'ê¸´ì¶•ì  í†µí™”ì •ì±…', icon: 'ğŸ”’' };
                break;
            case 'exchange_rate':
                if (indicator.value <= 1300) analysis = { status: 'positive', score: 1, text: 'í™˜ìœ¨ ì•ˆì •', icon: 'ğŸ’µ' };
                else if (indicator.value <= 1350) analysis = { status: 'neutral', score: 0, text: 'í™˜ìœ¨ ë³€ë™ì„± í™•ëŒ€', icon: ' fluctuating' };
                else analysis = { status: 'negative', score: -1, text: 'ì›í™” ì•½ì„¸ ì‹¬í™”', icon: 'ğŸ’¸' };
                break;
            case 'vix':
                if (indicator.value <= 20) analysis = { status: 'positive', score: 1, text: 'ì‹œì¥ ì•ˆì •', icon: 'ğŸ˜Œ' };
                else if (indicator.value <= 30) analysis = { status: 'neutral', score: 0, text: 'ë¶ˆì•ˆ ì‹¬ë¦¬ ì¡´ì¬', icon: 'ğŸ˜Ÿ' };
                else analysis = { status: 'negative', score: -2, text: 'ê³µí¬ ì‹¬ë¦¬ í™•ì‚°', icon: 'ğŸ˜±' };
                break;
            case 'industrial_production':
                if (indicator.value > 1.0) analysis = { status: 'positive', score: 2, text: 'ìƒì‚° í™œë°œ', icon: 'ğŸ­' };
                else if (indicator.value >= 0) analysis = { status: 'neutral', score: 0, text: 'ìƒì‚° ë³´í•©', icon: 'ğŸ˜' };
                else analysis = { status: 'negative', score: -2, text: 'ìƒì‚° ìœ„ì¶•', icon: 'ğŸ“‰' };
                break;
            case 'consumer_sentiment':
                if (indicator.value >= 100) analysis = { status: 'positive', score: 1, text: 'ì†Œë¹„ ì‹¬ë¦¬ ë‚™ê´€', icon: 'ğŸ˜Š' };
                else if (indicator.value >= 90) analysis = { status: 'neutral', score: 0, text: 'ì†Œë¹„ ì‹¬ë¦¬ ì¤‘ë¦½', icon: 'ğŸ˜' };
                else analysis = { status: 'negative', score: -1, text: 'ì†Œë¹„ ì‹¬ë¦¬ ë¹„ê´€', icon: 'ğŸ˜Ÿ' };
                break;
            case 'corp_bond_spread':
                if (indicator.value <= 0.8) analysis = { status: 'positive', score: 1, text: 'ì‹ ìš© ìœ„í—˜ ì™„í™”', icon: 'âœ…' };
                else if (indicator.value <= 1.2) analysis = { status: 'neutral', score: 0, text: 'ì‹ ìš© ìœ„í—˜ ë³´í†µ', icon: 'âš ï¸' };
                else analysis = { status: 'negative', score: -1, text: 'ì‹ ìš© ìœ„í—˜ ì¦ê°€', icon: 'ğŸš¨' };
                break;
            case 'dollar_index':
                if (indicator.value <= 100) analysis = { status: 'positive', score: 1, text: 'ë‹¬ëŸ¬ ì•½ì„¸ (ìœ„í—˜ìì‚° ì„ í˜¸)', icon: 'ğŸ’²' };
                else analysis = { status: 'negative', score: -1, text: 'ë‹¬ëŸ¬ ê°•ì„¸ (ì•ˆì „ìì‚° ì„ í˜¸)', icon: 'ğŸ’°' };
                break;
            case 'wti_price':
                if (indicator.value <= 80) analysis = { status: 'positive', score: 1, text: 'ìœ ê°€ ì•ˆì •', icon: 'â›½' };
                else if (indicator.value <= 100) analysis = { status: 'neutral', score: 0, text: 'ìœ ê°€ ìƒìŠ¹ ì••ë ¥', icon: 'ğŸ”º' };
                else analysis = { status: 'negative', score: -1, text: 'ê³ ìœ ê°€ ë¶€ë‹´', icon: 'ğŸ”¥' };
                break;
            case 'kospi':
                // KOSPIëŠ” ì ìˆ˜ ê³„ì‚°ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ì£¼ê¸°ë³´ë‹¤ ì°¸ê³ ìš©ìœ¼ë¡œ í‘œì‹œ
                analysis = { status: 'neutral', score: 0, text: 'ì£¼ìš” ì‹œì¥ ì§€ìˆ˜', icon: 'ğŸ“Š' };
                break;
            case 'producer_price_index':
                if (indicator.value <= 3.0) analysis = { status: 'positive', score: 1, text: 'ìƒì‚°ì ë¬¼ê°€ ì•ˆì •', icon: 'ğŸ˜Œ' };
                else analysis = { status: 'negative', score: -1, text: 'ìƒì‚°ì ë¬¼ê°€ ë¶€ë‹´', icon: 'ğŸ”º' };
                break;
            default: analysis = { status: 'neutral', score: 0, text: 'ë°ì´í„° ë¶„ì„ ì¤‘', icon: 'ğŸ“Š' };
        }
        return { ...indicator, ...analysis };
    });
}
function getMarketOutlook(analyzedIndicators) {
    const totalScore = analyzedIndicators.reduce((acc, indicator) => acc + (indicator.score || 0), 0);
    if (totalScore >= 5) return { status: 'positive', signal: 'ğŸ“ˆ', title: 'ìƒìŠ¹ ê¸°ëŒ€', analysis: "ë‹¤ìˆ˜ì˜ í•µì‹¬ ê²½ì œ ì§€í‘œê°€ ê¸ì •ì ì¸ ì‹ í˜¸ë¥¼ ë³´ë‚´ê³  ìˆìŠµë‹ˆë‹¤. ê²½ê¸° í™•ì¥, ë¬¼ê°€ ì•ˆì •, ìœ„í—˜ìì‚° ì„ í˜¸ ì‹¬ë¦¬ê°€ ë³µí•©ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ë©° íˆ¬ì í™˜ê²½ì´ ìš°í˜¸ì ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤." };
    if (totalScore <= -3) return { status: 'negative', signal: 'ğŸ“‰', title: 'í•˜ë½ ìš°ë ¤', analysis: "ê²½ê¸° ì¹¨ì²´ ë˜ëŠ” ë‘”í™”ì— ëŒ€í•œ ìš°ë ¤ê°€ ì»¤ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì¥ë‹¨ê¸° ê¸ˆë¦¬ì°¨, VIX ì§€ìˆ˜ ë“± ì£¼ìš” ì„ í–‰ì§€í‘œê°€ ë¶€ì •ì ì¸ ì‹ í˜¸ë¥¼ ë³´ë‚´ê³  ìˆì–´ ë³´ìˆ˜ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤." };
    return { status: 'neutral', signal: 'ğŸ˜', title: 'ì¤‘ë¦½ / í˜¼ì¡°', analysis: "ê¸ì •ì  ìš”ì¸(ì˜ˆ: ê²¬ì¡°í•œ ì„±ì¥)ê³¼ ë¶€ì •ì  ìš”ì¸(ì˜ˆ: ë†’ì€ ë¬¼ê°€, ì§€ì •í•™ì  ë¦¬ìŠ¤í¬)ì´ í˜¼ì¬ë˜ì–´ ì‹œì¥ì˜ ë°©í–¥ì„±ì´ ë¶ˆë¶„ëª…í•©ë‹ˆë‹¤. í–¥í›„ ë°œí‘œë  ê¸°ì—… ì‹¤ì ì´ë‚˜ ì£¼ìš” ì •ì±… ë³€í™”ì— ë”°ë¼ ì‹œì¥ì˜ ë°©í–¥ì´ ê²°ì •ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤." };
}

function renderInitialPlaceholders() {
    const ids = [
        "ğŸ‡ºğŸ‡¸ ì¥ë‹¨ê¸° ê¸ˆë¦¬ì°¨", "ğŸ‡°ğŸ‡· GDP ì„±ì¥ë¥ ", "ğŸ‡°ğŸ‡· ìˆ˜ì¶œ ì¦ê°€ìœ¨", "ğŸ‡°ğŸ‡· ì†Œë¹„ìë¬¼ê°€ì§€ìˆ˜", "ğŸ‡°ğŸ‡· ì‹¤ì—…ë¥ ",
        "ğŸ‡°ğŸ‡· ê¸°ì¤€ê¸ˆë¦¬", "ğŸ‡°ğŸ‡· ì›/ë‹¬ëŸ¬ í™˜ìœ¨", "ğŸ˜± VIX ì§€ìˆ˜", "ğŸ‡°ğŸ‡· ì‚°ì—…ìƒì‚°ì§€ìˆ˜",
        "ğŸ‡°ğŸ‡· ì†Œë¹„ìì‹¬ë¦¬ì§€ìˆ˜", "ğŸ‡°ğŸ‡· íšŒì‚¬ì±„ ìŠ¤í”„ë ˆë“œ", "ğŸ’² ë‹¬ëŸ¬ ì¸ë±ìŠ¤", "ğŸ›¢ï¸ WTI ìœ ê°€",
        "ğŸ‡°ğŸ‡· ì½”ìŠ¤í”¼", "ğŸ‡°ğŸ‡· ìƒì‚°ìë¬¼ê°€ì§€ìˆ˜"
    ];
    const grid = document.getElementById('indicator-grid');
    grid.innerHTML = ids.map(name => `<div class="indicator-card"><h4>${name}</h4><p class="loading-text">Loading...</p></div>`).join('');
}

function renderDashboard(analyzedIndicators, marketOutlook) {
    document.getElementById('update-time').innerText = `ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ${new Date().toLocaleString('ko-KR')}`;
    const outlookSection = document.getElementById('outlook-section');
    outlookSection.className = `${marketOutlook.status}-bg`;
    outlookSection.innerHTML = `<div class="outlook-signal">${marketOutlook.signal}</div><h3 class="outlook-title ${marketOutlook.status}-text">${marketOutlook.title}</h3>`;
    
    const indicatorGrid = document.getElementById('indicator-grid');
    indicatorGrid.innerHTML = '';
    
    analyzedIndicators.forEach(indicator => {
        if (!indicator.id) return; // Skip if indicator is not found
        const card = document.createElement('div');
        card.className = 'indicator-card';
        const valueText = (typeof indicator.value === 'number' && !isNaN(indicator.value)) 
            ? `${indicator.value.toLocaleString()}${indicator.unit || ''}` 
            : `<span class="loading-text">${indicator.value}</span>`;
            
        card.innerHTML = `
            <h4>${indicator.name} <span class="date">(${indicator.date})</span></h4>
            <p class="indicator-value">${valueText}</p>
            <div class="indicator-status">
                <span class="status-icon">${indicator.icon}</span>
                <span class="status-text ${indicator.status}-icon">${indicator.text}</span>
            </div>`;
        indicatorGrid.appendChild(card);
    });
    document.getElementById('analysis-section').innerHTML = `<p>${marketOutlook.analysis}</p>`;
}

</script>
</body>
</html>
