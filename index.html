<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live API 경제 지표 대시보드</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>

</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Live API 경제 지표 대시보드</h1>
            <p id="update-time">데이터 로딩 중...</p>
        </header>

        <h2 class="section-title">📈 개별 종목 분석</h2>
        <div class="search-section">
            <div class="autocomplete-container">
                <input type="text" id="stock-code-input" placeholder="분석하고 싶은 종목의 이름 또는 코드를 입력하세요 (예: 삼성전자)">
                <div class="autocomplete-items" id="autocomplete-list"></div>
            </div>
            <button id="stock-search-btn">조회</button>
        </div>
        <div id="stock-details-section" style="display: none;">
            </div>

        <div class="accordion">
            <button class="accordion-header">📊 시장 종합 전망</button>
            <div class="accordion-panel" style="display: block;">
                <div id="outlook-section"><p class="loading-text">지표 분석 중...</p></div>

                <div style="margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">
                    <h3 style="margin-top:0; font-size: 1.2em; color: #0056b3;">🎯 종합 시장 전망 분석</h3>
                    <p style="font-size: 0.9em; margin-bottom: 15px;">
                        모든 지표를 통합 분석한 결과와 점수(-100 ~ +100)를 게이지 형태로 시각화하여 현재 시장 상태를 보여줍니다.
                        분석에는 다음 지표들이 사용됩니다:
                    </p>
                    <ul style="font-size: 0.85em; columns: 2; column-gap: 20px;">
                        <li><b>단기 지표 (40%):</b> CPI, NFP, 장단기금리차, VIX, 수출, 환율 등</li>
                        <li><b>거시 지표 (60%):</b> 마샬케이, GDP갭, 美 경기사이클, 韓 경기순환</li>
                    </ul>
                </div>

                <h3 class="section-title" style="font-size: 1.4em; margin-top: 25px;">📊 섹터별 전망</h3>
                <p style="font-size: 0.9em; margin-top: -15px; margin-bottom: 15px; color: #6c757d;">
                    종합 분석 결과를 바탕으로 주요 섹터(반도체, 에너지, 경기소비재, 금리민감주)에 대한 간략한 전망을 제공합니다.
                </p>
                <div id="sector-outlook-grid" class="sector-outlook-grid"></div>

                <h3 class="section-title" style="font-size: 1.4em; margin-top: 25px;">💼 자산군별 투자 의견</h3>
                 <p style="font-size: 0.9em; margin-top: -15px; margin-bottom: 15px; color: #6c757d;">
                    현재 시장 국면에 따라 주식, 채권, 달러, 원자재 등 주요 자산군별 투자 비중 조정에 대한 의견을 제안합니다.
                </p>
                <div id="investment-suggestions-grid" class="sector-outlook-grid"></div>
                 <p class="disclaimer">※ 본 분석은 제공된 경제 지표를 기반으로 한 단순 전망이며, 투자 추천이 아닙니다. 모든 투자의 책임은 본인에게 있습니다.</p>
                 <p class="disclaimer" style="margin-top: 5px;">※ 모든 차트는 API가 제공하는 역사적 전체 데이터를 표시합니다.</p>
            </div>
        </div>

        <div class="accordion">
            <button class="accordion-header">🎯 S&P 500 단기 전망</button>
            <div class="accordion-panel" style="display: block;">
                <div id="sp500-prediction-section"> <p class="loading-text">선행 지표 분석 중...</p>
                </div>
                
                <h4 style="margin-top: 20px; margin-bottom: 10px; font-size: 1.1em;">예측 근거 지표 현황</h4>
                <table id="sp500-factors-table" style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
                    <thead>
                        <tr style="background-color: #f8f9fa;">
                            <th style="padding: 8px; border: 1px solid #dee2e6; text-align: left;">지표명</th>
                            <th style="padding: 8px; border: 1px solid #dee2e6; text-align: right;">현재 값</th>
                            <th style="padding: 8px; border: 1px solid #dee2e6; text-align: left;">데이터 기준일</th>
                            <th style="padding: 8px; border: 1px solid #dee2e6; text-align: center;">상태</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="4" class="loading-text" style="padding: 10px;">Loading...</td></tr>
                    </tbody>
                </table>

                <h4 style="margin-top: 20px; margin-bottom: 10px; font-size: 1.1em;">S&P 500 전체 기간 추이 (1957~)</h4>
                 <div class="stock-chart-container" style="height: 500px;"> <canvas id="sp500-trend-chart"></canvas>
                 </div>

                 <p style="font-size: 0.9em; margin-top: 15px; color: #6c757d;">
                    주: ISM 제조업 PMI, 소비자심리지수, 구리 가격, 장단기 금리차 등 주요 선행 지표를 바탕으로 S&P 500의 단기 방향성을 예측합니다. 예측 지수 값은 제공하지 않습니다.
                </p>
                <p class="disclaimer">※ 본 예측은 과거 데이터를 기반으로 한 참고 자료이며, 실제 시장 움직임과 다를 수 있습니다.</p>
            </div>
        </div>


        <div class="accordion">
            <button class="accordion-header">🌐 주요 지표 & 발표 일정</button>
            <div class="accordion-panel" style="display: block;">
                
                <h3 class="section-title" style="font-size: 1.4em; margin-top: 0;">실시간 주요 지표</h3>
                <div id="indicator-grid" class="indicator-grid">
                    </div>

                <h3 class="section-title" style="font-size: 1.4em; margin-top: 25px;">다가오는 주요 이벤트</h3>
                <div id="economic-calendar-grid" class="calendar-grid"></div>

                <h3 class="section-title" style="font-size: 1.4em; margin-top: 25px;">월별 발표일</h3>
                <div id="release-schedule-grid" class="release-schedule-grid"></div>

            </div>
        </div>
        
        <div class="accordion">
            <button class="accordion-header">🇺🇸 미국 거시 경제 분석</button>
            <div class="accordion-panel" style="display: block;">
                 <h3 class="section-title" style="font-size: 1.4em; margin-top: 0;">마샬케이와 금리 (역사적 추이)</h3>
                <div id="marshall-analysis" class="analysis-content" style="padding: 15px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 15px;">
                    <p class="loading-text">차트 분석 중...</p>
                </div>
                <div class="stock-chart-container" style="height: 450px;">
                    <canvas id="marshall-k-chart"></canvas>
                </div>
                <p style="font-size: 0.8em; color: #6c757d; text-align: right; margin-top: 5px;">
                    주: 마샬케이는 M2(광의통화)를 명목 GDP로 나눈 값입니다.
                </p>
                
                 <h3 class="section-title" style="font-size: 1.4em; margin-top: 25px;">GDP 갭(HP필터) 분석</h3>
                <div id="gdp-gap-analysis" class="analysis-content" style="padding: 15px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 15px;">
                    <p class="loading-text">데이터 로딩 및 분석 중...</p>
                </div>
                <div class="stock-chart-container" style="height: 450px;">
                    <canvas id="gdp-gap-chart"></canvas>
                </div>
                <p style="font-size: 0.8em; color: #6c757d; text-align: right; margin-top: 5px;">
                    주: HP필터를 이용해 추출한 장기 추세선 대비 현재 실질 GDP가 얼마나 벗어났는지를 보여줍니다.
                </p>
                
                 <h3 class="section-title" style="font-size: 1.4em; margin-top: 25px;">소비와 GDP 사이클 분석</h3>
                 <div id="gdp-consumption-analysis" class="analysis-content" style="padding: 15px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 15px;">
                    <p class="loading-text">데이터 로딩 및 분석 중...</p>
                </div>
                <div class="stock-chart-container" style="height: 450px;">
                    <canvas id="gdp-consumption-chart"></canvas>
                </div>
                 <p style="font-size: 0.8em; color: #6c757d; text-align: right; margin-top: 5px;">
                    주: 녹색 선은 실질 GDP 성장률(YoY, 좌측 축), 파란색 선은 실질 개인소비지출(PCE) 성장률(YoY, 좌측 축), 빨간 점선은 S&P 500 지수(우측 축)입니다. 붉은 레이블은 주요 경기 침체 기간입니다.
                </p>
            </div>
        </div>

        <div class="accordion">
            <button class="accordion-header">🇰🇷 한국 경기 순환 분석 (선행/동행지수)</button>
            <div class="accordion-panel" style="display: block;">
                 <h3 class="section-title" style="font-size: 1.4em; margin-top: 0;">경기순환지수 추이 (10년)</h3>
                <div id="cycle-analysis" class="analysis-content" style="padding: 15px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 15px;">
                    <p class="loading-text">차트 분석 중...</p>
                </div>
                <div class="stock-chart-container" style="height: 450px;">
                    <canvas id="cycle-chart"></canvas>
                </div>
                <p style="font-size: 0.8em; color: #6c757d; text-align: right; margin-top: 5px;">
                    주: 선행지수(미래 경기 예측)와 동행지수(현재 경기 상태)의 100 기준선(점선) 교차 및 방향성이 중요합니다. 붉은 레이블은 주요 미국 경기 침체 시기를 나타냅니다.
                </p>
            </div>
        </div>
        
    </div> <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modal-title"></h2>
            <div class="chart-container">
                <canvas id="indicator-chart" style="display:none;"></canvas>
            </div>
            <h3>지표 설명</h3>
            <p id="modal-description"></p>
            <h3>판단 기준</h3>
            <ul id="modal-criteria"></ul>
        </div>
    </div>

    <script type="module" src="script.js"></script>

    <footer class="footer">
        <p>본 페이지는 실제 투자를 권유하는 것이 아니며, 제공되는 정보는 참고용입니다.</p>
    </footer>
</body>
</html>
