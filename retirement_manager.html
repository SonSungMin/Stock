<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>7ë…„ ì€í‡´ í¬íŠ¸í´ë¦¬ì˜¤ ì§€ëŠ¥í˜• ê´€ë¦¬ ë„êµ¬</title>
    <style>
        :root { --primary: #0056b3; --positive: #28a745; --negative: #dc3545; --neutral: #ffc107; }
        body { font-family: 'Malgun Gothic', sans-serif; background: #f4f7f6; padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: var(--primary); text-align: center; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        
        /* ì‹œì¥ ë¶„ì„ ì„¹ì…˜ (GitHub ë¡œì§ ë°˜ì˜) */
        .status-panel { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; background: #eef2f7; padding: 20px; border-radius: 10px; margin-bottom: 25px; }
        .market-badge { font-size: 2.5em; text-align: center; display: flex; flex-direction: column; justify-content: center; }
        .market-info h3 { margin-top: 0; }
        
        /* ë¦¬ë°¸ëŸ°ì‹± í…Œì´ë¸” */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 15px; border-bottom: 1px solid #ddd; text-align: center; }
        th { background: var(--primary); color: white; }
        input { width: 120px; padding: 8px; text-align: right; border: 1px solid #ccc; border-radius: 4px; }
        .adjusted-weight { font-weight: bold; color: var(--primary); }
        
        /* íˆ¬ìê¸ˆ ë°°ë¶„ ì„¹ì…˜ */
        .investment-call { background: #fff3cd; padding: 20px; border-radius: 10px; margin-top: 20px; border-left: 5px solid var(--neutral); }
        .btn-calc { background: var(--primary); color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; width: 100%; font-size: 1.1em; margin-top: 15px; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸš€ 7ë…„ ì€í‡´ ìì‚° ì§€ëŠ¥í˜• ê´€ë¦¬ì</h1>

    <div class="status-panel" id="market-status-panel">
        <div class="market-badge" id="market-signal">ğŸ¤”</div>
        <div class="market-info">
            <h3 id="market-title">ë°ì´í„° ë¶„ì„ ì¤‘...</h3>
            <p id="market-analysis">GitHub ì†ŒìŠ¤ì˜ ê°€ì¤‘ì¹˜ ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ì‹œì¥ êµ­ë©´ì„ íŒë‹¨í•˜ê³  ë¹„ì¤‘ì„ ì¡°ì ˆí•©ë‹ˆë‹¤.</p>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>ìì‚°êµ°</th>
                <th>ê¸°ë³¸ ë¹„ì¤‘</th>
                <th>í˜„ì¬ ì‹œì¥ ì¡°ì • ë¹„ì¤‘</th>
                <th>í˜„ì¬ í‰ê°€ê¸ˆì•¡(ì›)</th>
                <th>ëª©í‘œ ê¸ˆì•¡(ì›)</th>
                <th>ë§¤ë§¤ í•„ìš”ëŸ‰</th>
            </tr>
        </thead>
        <tbody id="asset-table">
            </tbody>
    </table>

    <div class="investment-call">
        <strong>ğŸ’¡ ì´ë²ˆ ë‹¬ ì‹ ê·œ íˆ¬ìê¸ˆ (150ë§Œ ì›) ë°°ë¶„ ê°€ì´ë“œ</strong>
        <div id="monthly-guide" style="margin-top: 10px; line-height: 1.8;">
            ê³„ì‚° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹œì¥ ìƒí™©ì— ë§ì¶˜ íˆ¬ì ë°°ë¶„ì•¡ì´ í‘œì‹œë©ë‹ˆë‹¤.
        </div>
    </div>

    <button class="btn-calc" onclick="updateDashboard()">ì‹œì¥ ë°ì´í„° ë°˜ì˜ ë° ë¦¬ë°¸ëŸ°ì‹± ê³„ì‚°</button>
</div>

<script>
    // GitHub ì†ŒìŠ¤(indicators.js/analysis.js)ì˜ ê°€ì¤‘ì¹˜ ë° ë¶„ì„ ë¡œì§ ì´ì‹
    const baseAssets = [
        { id: 'stock', name: "ì£¼ì‹ (S&P500/ë°°ë‹¹)", weight: 0.40 },
        { id: 'bond', name: "ì±„ê¶Œ (ë¯¸êµ­ì±„)", weight: 0.20 },
        { id: 'gold', name: "ê¸ˆ (KRX ê¸ˆ)", weight: 0.10 },
        { id: 'cash', name: "í˜„ê¸ˆ (ì›í™”/ë‹¬ëŸ¬)", weight: 0.10 },
        { id: 'income', name: "ë‚˜ë¨¸ì§€ (ë°°ë‹¹ì£¼/ë¦¬ì¸ )", weight: 0.20 }
    ];

    // GitHubì˜ analyzeIndicators ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
    // ì‹¤ì œ ìš´ì˜ ì‹œì—ëŠ” fetchFredData ë“±ì„ í†µí•´ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì•¼ í•©ë‹ˆë‹¤.
    function getMockMarketScore() {
        // ì˜ˆì‹œ: ì¥ë‹¨ê¸° ê¸ˆë¦¬ì°¨(weight 5), CPI(weight 5), PMI(weight 5) ë“±
        // ì—¬ê¸°ì„œëŠ” ì¢…í•© ì ìˆ˜ê°€ +30(ì™„ë§Œí•œ íšŒë³µ)ì¸ ìƒí™©ì„ ê°€ì •
        return 30; 
    }

    function updateDashboard() {
        const score = getMockMarketScore();
        let status = 'neutral', signal = 'ğŸ“Š', title = 'ë°©í–¥ì„± íƒìƒ‰ êµ¬ê°„', adj = { stock: 0, bond: 0, cash: 0 };

        // GitHub getMarketOutlook ë¡œì§ ì ìš©
        if (score > 20) {
            status = 'positive'; signal = 'ğŸ“ˆ'; title = 'ì™„ë§Œí•œ íšŒë³µ/ìƒìŠ¹ êµ­ë©´';
            adj = { stock: 0.05, bond: 0, cash: -0.05 }; // ì£¼ì‹ ë¹„ì¤‘ í™•ëŒ€
        } else if (score < -20) {
            status = 'negative'; signal = 'ğŸ“‰'; title = 'ê²½ê¸° ë‘”í™”/ìœ„í—˜ ê´€ë¦¬';
            adj = { stock: -0.10, bond: 0.05, cash: 0.05 }; // ì£¼ì‹ ì¶•ì†Œ, ì±„ê¶Œ/í˜„ê¸ˆ í™•ëŒ€
        }

        document.getElementById('market-signal').innerText = signal;
        document.getElementById('market-title').innerText = title;
        document.getElementById('market-status-panel').className = `status-panel ${status}-bg`;

        renderTable(adj);
    }

    function renderTable(adj) {
        const tableBody = document.getElementById('asset-table');
        tableBody.innerHTML = '';
        let totalCurrent = 0;

        // í˜„ì¬ ì…ë ¥ê°’ í•©ì‚°
        baseAssets.forEach((_, i) => {
            const val = parseFloat(document.getElementById(`curr-${i}`)?.value) || 0;
            totalCurrent += val;
        });

        let monthlyGuideHtml = "";

        baseAssets.forEach((asset, i) => {
            // ì‹œì¥ ìƒí™©ì— ë”°ë¥¸ ë¹„ì¤‘ ì¡°ì •
            const adjustedWeight = asset.weight + (adj[asset.id] || 0);
            const targetAmt = totalCurrent * adjustedWeight;
            const currentAmt = parseFloat(document.getElementById(`curr-${i}`)?.value) || 0;
            const diff = targetAmt - currentAmt;

            // ì›” 150ë§Œ ì› íˆ¬ìê¸ˆ ë°°ë¶„ì•¡ ê³„ì‚°
            const monthlyInvest = 1500000 * adjustedWeight;

            const row = `<tr>
                <td>${asset.name}</td>
                <td>${(asset.weight * 100).toFixed(0)}%</td>
                <td class="adjusted-weight">${(adjustedWeight * 100).toFixed(0)}%</td>
                <td><input type="number" id="curr-${i}" value="${currentAmt}" onchange="renderTable({stock:${adj.stock||0}, bond:${adj.bond||0}, cash:${adj.cash||0}})"></td>
                <td>${Math.round(targetAmt).toLocaleString()}</td>
                <td style="color:${diff > 0 ? 'red' : 'blue'}">${diff > 0 ? '+' : ''}${Math.round(diff).toLocaleString()}</td>
            </tr>`;
            tableBody.innerHTML += row;

            monthlyGuideHtml += `â€¢ <strong>${asset.name}</strong>: ë§¤ìˆ˜ì•¡ ${Math.round(monthlyInvest).toLocaleString()}ì›<br>`;
        });

        document.getElementById('monthly-guide').innerHTML = monthlyGuideHtml;
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateDashboard();
</script>

</body>
</html>
